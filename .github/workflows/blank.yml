- name: Start WireGuard
        run: |
          # Создаем конфиг, используя твои конкретные секреты
          echo "[Interface]
          PrivateKey = ${{ secrets.WG_PRIVATE_KEY }}
          Address = 10.100.0.5/32
          DNS = 1.1.1.1
          
          [Peer]
          # Здесь используем твой секрет 'PUBLIC' (это должен быть паблик ключ СЕРВЕРА)
          PublicKey = ${{ secrets.PUBLIC }}
          
          # Настраиваем маршрутизацию (см. совет ниже про AllowedIPs)
          AllowedIPs = 10.100.0.0/24
          
          # Здесь подставляем 'IP:PORT' целиком
          Endpoint = ${{ secrets.WG_ENDPOINT }}
          
          PersistentKeepalive = 25" | sudo tee /etc/wireguard/wg0.conf

          # Поднимаем интерфейс
          sudo wg-quick up wg0
          
          # Выводим статус (ключи будут скрыты GitHub'ом)
          sudo wg show
